<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏≤‡∏ï‡∏∏‡πÄ‡∏à‡πâ‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏ô - ‡∏£‡∏û.‡∏™‡∏∞‡πÄ‡∏î‡∏≤</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-gold: #D4AF37;
            --deep-green: #1B4D3E;
        }
        body {
            font-family: 'Prompt', sans-serif;
            background: #fdfbf7;
            overflow-x: hidden;
            transition: background 1s ease;
        }
        .thai-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d4af37' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        /* Glassmorphism Card */
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(212, 175, 55, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }
        /* Loading Animation */
        .spinner-wheel {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-gold);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* Input Customization */
        input[type="date"] {
            appearance: none;
            -webkit-appearance: none;
            color: #333;
            font-family: 'Prompt', sans-serif;
        }
    </style>
</head>
<body class="thai-pattern min-h-screen flex flex-col items-center justify-center p-4">

    <div class="text-center mb-8 animate-fade-in-down">
        <div class="inline-block p-3 rounded-full border-2 border-yellow-500 bg-white shadow-md mb-3">
            <i class="fas fa-seedling text-3xl text-green-800"></i>
        </div>
        <h1 class="text-2xl font-bold text-green-900 tracking-wide">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏≤‡∏ï‡∏∏‡πÄ‡∏à‡πâ‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏ô</h1>
        <p class="text-yellow-700 font-light text-sm">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÅ‡∏ú‡∏ô‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <br>‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏™‡∏∞‡πÄ‡∏î‡∏≤</p>
    </div>

    <div id="mainContainer" class="w-full max-w-md glass-card rounded-2xl p-6 relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-green-800 via-yellow-500 to-green-800"></div>

        <div id="formSection">
            <label class="block text-gray-700 text-sm font-bold mb-2 ml-1">
                <i class="far fa-calendar-alt mr-1"></i> ‡πÉ‡∏™‡πà‡∏ß‡∏±‡∏ô/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô/‡∏õ‡∏µ‡πÄ‡∏Å‡∏¥‡∏î
            </label>
            <div class="relative">
                <input type="date" id="birthDate" class="w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:outline-none transition shadow-inner">
            </div>
            
            <p class="text-xs text-gray-400 mt-2 ml-1">*‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≤‡∏°‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡∏ï‡∏≤‡∏Å‡∏®‡∏¥‡∏•‡∏≤/‡πÄ‡∏ß‡∏ä‡∏®‡∏∂‡∏Å‡∏©‡∏≤</p>

            <button onclick="analyze()" class="mt-6 w-full bg-gradient-to-r from-green-800 to-green-600 text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition duration-300 flex justify-center items-center gap-2">
                <span>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</span> <i class="fas fa-arrow-right"></i>
            </button>
        </div>

        <div id="loadingSection" class="hidden flex flex-col items-center justify-center py-10">
            <div class="spinner-wheel mb-4"></div>
            <p class="text-green-800 animate-pulse">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏´‡∏°‡∏∏‡∏ô‡∏•‡πâ‡∏≠‡∏ò‡∏≤‡∏ï‡∏∏...</p>
        </div>

        <div id="resultSection" class="hidden text-center">
            <div id="elementBadge" class="inline-block px-4 py-1 rounded-full text-xs font-bold text-white mb-4 shadow-sm uppercase tracking-wider">
                THAI TRADITIONAL MEDICINE
            </div>

            <div class="relative w-24 h-24 mx-auto mb-4">
                <div class="absolute inset-0 bg-yellow-200 rounded-full opacity-20 animate-ping"></div>
                <div class="relative w-full h-full bg-white rounded-full flex items-center justify-center border-4 border-yellow-100 shadow-md">
                    <span id="resultIcon" class="text-5xl">üî•</span>
                </div>
            </div>

            <h2 id="resultMain" class="text-3xl font-bold text-gray-800 mb-1">‡∏ò‡∏≤‡∏ï‡∏∏‡πÑ‡∏ü</h2>
            <h3 id="resultSub" class="text-lg text-yellow-600 font-medium mb-4">‡∏Å‡∏≥‡πÄ‡∏î‡∏≤ (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô)</h3>
            
            <div class="bg-white/60 rounded-xl p-4 mb-6 border border-gray-100 text-left shadow-sm">
                <p id="resultDesc" class="text-gray-600 text-sm leading-relaxed"></p>
            </div>

            <div class="grid grid-cols-2 gap-3 mb-6">
                <div class="bg-green-50 p-3 rounded-lg border border-green-100">
                    <i class="fas fa-utensils text-green-600 mb-1"></i>
                    <p class="text-xs text-green-800 font-bold">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</p>
                    <span id="foodRec" class="text-xs text-gray-600">‡∏ú‡∏±‡∏Å‡∏ö‡∏∏‡πâ‡∏á, ‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤</span>
                </div>
                <div class="bg-red-50 p-3 rounded-lg border border-red-100">
                    <i class="fas fa-hand-holding-medical text-red-600 mb-1"></i>
                    <p class="text-xs text-red-800 font-bold">‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£</p>
                    <span id="herbRec" class="text-xs text-gray-600">‡πÉ‡∏ö‡∏ö‡∏±‡∏ß‡∏ö‡∏Å</span>
                </div>
            </div>

            <button onclick="location.reload()" class="text-gray-400 hover:text-green-700 text-sm underline">
                ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
            </button>
        </div>
    </div>

    <div class="mt-8 text-center opacity-60">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/1200px-Google_%22G%22_logo.svg.png" alt="Google" class="h-4 inline-block opacity-50 grayscale">
        <span class="text-xs text-gray-500">Powered by Google Cloud & Sadao Hospital</span>
    </div>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
        // üîó URL ‡∏Ç‡∏≠‡∏á Apps Script ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏≠‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤)
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyX7ZJvwflkNzhZ1SPPOJZZcJBvh_Bpbc2acOjh6fEcj58fv9wHu4i9M8J5BoCNmIoDbw/exec';

        // üß† Logic ‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏ò‡∏≤‡∏ï‡∏∏ (‡∏≠‡∏¥‡∏á‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏°‡∏≤ + ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô)
        const elementData = [
            // --- ‡∏ò‡∏≤‡∏ï‡∏∏‡πÑ‡∏ü (‡∏Ñ‡∏¥‡∏°‡∏´‡∏±‡∏ô‡∏ï‡πå) ---
            { start: [2, 16], end: [3, 15], main: "‡∏ò‡∏≤‡∏ï‡∏∏‡πÑ‡∏ü (‡∏û‡∏¥‡∏ï‡∏ï‡∏∞)", sub: "‡∏û‡∏±‡∏ó‡∏ò‡∏õ‡∏¥‡∏ï‡∏ï‡∏∞ (‡∏î‡∏µ‡πÉ‡∏ô‡∏ù‡∏±‡∏Å)", icon: "üî•", color: "from-orange-100 to-red-100", badge: "bg-red-500", desc: "‡∏°‡∏±‡∏Å‡∏´‡∏á‡∏∏‡∏î‡∏´‡∏á‡∏¥‡∏î‡∏á‡πà‡∏≤‡∏¢ ‡∏ó‡πâ‡∏≠‡∏á‡∏ú‡∏π‡∏Å ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏¢‡πà‡∏≠‡∏¢", food: "‡∏£‡∏™‡∏Ç‡∏°‡πÄ‡∏¢‡πá‡∏ô: ‡∏°‡∏∞‡∏£‡∏∞, ‡∏™‡∏∞‡πÄ‡∏î‡∏≤", herb: "‡∏Ç‡∏°‡∏¥‡πâ‡∏ô‡∏ä‡∏±‡∏ô, ‡∏ü‡πâ‡∏≤‡∏ó‡∏∞‡∏•‡∏≤‡∏¢‡πÇ‡∏à‡∏£" },
            { start: [3, 16], end: [4, 15], main: "‡∏ò‡∏≤‡∏ï‡∏∏‡πÑ‡∏ü (‡∏û‡∏¥‡∏ï‡∏ï‡∏∞)", sub: "‡∏≠‡∏û‡∏±‡∏ó‡∏ò‡∏õ‡∏¥‡∏ï‡∏ï‡∏∞ (‡∏î‡∏µ‡∏ô‡∏≠‡∏Å‡∏ù‡∏±‡∏Å)", icon: "üî•", color: "from-orange-100 to-red-100", badge: "bg-red-500", desc: "‡∏à‡∏∏‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏î ‡πÅ‡∏ô‡πà‡∏ô‡∏ó‡πâ‡∏≠‡∏á ‡∏õ‡∏ß‡∏î‡∏ó‡πâ‡∏≠‡∏á‡∏ö‡πà‡∏≠‡∏¢ ‡∏Å‡∏£‡∏î‡πÑ‡∏´‡∏•‡∏¢‡πâ‡∏≠‡∏ô", food: "‡∏£‡∏™‡∏à‡∏∑‡∏î‡πÄ‡∏¢‡πá‡∏ô: ‡∏ï‡∏≥‡∏•‡∏∂‡∏á, ‡∏ú‡∏±‡∏Å‡∏ö‡∏∏‡πâ‡∏á", herb: "‡∏ß‡πà‡∏≤‡∏ô‡∏´‡∏≤‡∏á‡∏à‡∏£‡∏∞‡πÄ‡∏Ç‡πâ, ‡∏£‡∏≤‡∏á‡∏à‡∏∑‡∏î" },
            { start: [4, 16], end: [5, 15], main: "‡∏ò‡∏≤‡∏ï‡∏∏‡πÑ‡∏ü (‡∏û‡∏¥‡∏ï‡∏ï‡∏∞)", sub: "‡∏Å‡∏≥‡πÄ‡∏î‡∏≤ (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô)", icon: "üî•", color: "from-orange-100 to-red-100", badge: "bg-red-500", desc: "‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏Ç‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡πÅ‡∏û‡πâ‡πÅ‡∏î‡∏î ‡∏õ‡∏ß‡∏î‡∏´‡∏±‡∏ß‡πÑ‡∏°‡πÄ‡∏Å‡∏£‡∏ô ‡∏£‡πâ‡∏≠‡∏ô‡πÉ‡∏ô", food: "‡∏£‡∏™‡πÄ‡∏¢‡πá‡∏ô: ‡πÅ‡∏ï‡∏á‡πÇ‡∏°, ‡∏ü‡∏±‡∏Å‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß", herb: "‡∏¢‡πà‡∏≤‡∏ô‡∏≤‡∏á, ‡πÉ‡∏ö‡∏ö‡∏±‡∏ß‡∏ö‡∏Å" },
            
            // --- ‡∏ò‡∏≤‡∏ï‡∏∏‡∏•‡∏° (‡∏ß‡∏™‡∏±‡∏ô‡∏ï‡πå) ---
            { start: [5, 16], end: [6, 15], main: "‡∏ò‡∏≤‡∏ï‡∏∏‡∏•‡∏° (‡∏ß‡∏≤‡∏ï‡∏∞)", sub: "‡∏´‡∏ó‡∏±‡∏¢‡∏ß‡∏≤‡∏ï‡∏∞ (‡∏•‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à)", icon: "üå¨Ô∏è", color: "from-green-100 to-yellow-100", badge: "bg-yellow-600", desc: "‡πÉ‡∏à‡∏™‡∏±‡πà‡∏ô ‡∏ß‡∏¥‡∏ï‡∏Å‡∏Å‡∏±‡∏á‡∏ß‡∏• ‡∏ô‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏´‡∏•‡∏±‡∏ö ‡∏≠‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏•‡∏µ‡∏¢", food: "‡∏£‡∏™‡∏™‡∏∏‡∏Ç‡∏∏‡∏°: ‡∏Ç‡∏¥‡∏á, ‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤", herb: "‡∏î‡∏≠‡∏Å‡∏°‡∏∞‡∏•‡∏¥, ‡πÄ‡∏Å‡∏™‡∏£‡∏ó‡∏±‡πâ‡∏á 5" },
            { start: [6, 16], end: [7, 15], main: "‡∏ò‡∏≤‡∏ï‡∏∏‡∏•‡∏° (‡∏ß‡∏≤‡∏ï‡∏∞)", sub: "‡∏™‡∏±‡∏ï‡∏ñ‡∏Å‡∏ß‡∏≤‡∏ï‡∏∞ (‡∏•‡∏°‡∏Ñ‡∏°‡∏£‡∏≤‡∏ß‡∏î‡∏≤‡∏ö)", icon: "üå¨Ô∏è", color: "from-green-100 to-yellow-100", badge: "bg-yellow-600", desc: "‡∏õ‡∏ß‡∏î‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏Ç‡πá‡∏°‡πÅ‡∏ó‡∏á ‡πÄ‡∏à‡πá‡∏ö‡πÅ‡∏õ‡∏•‡∏ö‡∏ï‡∏≤‡∏°‡∏ï‡∏±‡∏ß", food: "‡∏£‡∏™‡πÄ‡∏ú‡πá‡∏î‡∏£‡πâ‡∏≠‡∏ô: ‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢, ‡∏î‡∏µ‡∏õ‡∏•‡∏µ", herb: "‡πÑ‡∏û‡∏•, ‡πÄ‡∏ñ‡∏≤‡∏ß‡∏±‡∏•‡∏¢‡πå‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏á" },
            { start: [7, 16], end: [8, 15], main: "‡∏ò‡∏≤‡∏ï‡∏∏‡∏•‡∏° (‡∏ß‡∏≤‡∏ï‡∏∞)", sub: "‡∏™‡∏∏‡∏°‡∏ô‡∏≤‡∏ß‡∏≤‡∏ï‡∏∞ (‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î)", icon: "üå¨Ô∏è", color: "from-green-100 to-yellow-100", badge: "bg-yellow-600", desc: "‡∏ß‡∏¥‡∏á‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô ‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏∑‡∏î‡∏á‡πà‡∏≤‡∏¢ ‡∏ä‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏°‡∏∑‡∏≠‡∏õ‡∏•‡∏≤‡∏¢‡πÄ‡∏ó‡πâ‡∏≤", food: "‡∏£‡∏™‡∏£‡πâ‡∏≠‡∏ô: ‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ, ‡∏Ç‡πà‡∏≤", herb: "‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢‡∏î‡∏≥, ‡∏Ç‡∏¥‡∏á‡πÅ‡∏Å‡πà" },

            // --- ‡∏ò‡∏≤‡∏ï‡∏∏‡∏ô‡πâ‡∏≥ (‡πÄ‡∏´‡∏°‡∏±‡∏ô‡∏ï‡πå) --- (‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠)
            // *Logic ‡∏ô‡∏µ‡πâ‡∏ú‡∏°‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏° Loop ‡∏Ç‡∏≠‡∏á‡∏õ‡∏µ*
            { start: [8, 16], end: [9, 15], main: "‡∏ò‡∏≤‡∏ï‡∏∏‡∏ô‡πâ‡∏≥ (‡πÄ‡∏™‡∏°‡∏´‡∏∞)", sub: "‡∏®‡∏≠‡πÄ‡∏™‡∏°‡∏´‡∏∞ (‡∏Ñ‡∏≠)", icon: "üíß", color: "from-blue-100 to-cyan-100", badge: "bg-blue-500", desc: "‡πÄ‡∏à‡πá‡∏ö‡∏Ñ‡∏≠‡∏ö‡πà‡∏≠‡∏¢ ‡πÑ‡∏≠ ‡∏°‡∏µ‡πÄ‡∏™‡∏°‡∏´‡∏∞‡πÉ‡∏ô‡∏Ñ‡∏≠", food: "‡∏£‡∏™‡πÄ‡∏õ‡∏£‡∏µ‡πâ‡∏¢‡∏ß: ‡∏°‡∏∞‡∏ô‡∏≤‡∏ß, ‡∏°‡∏∞‡∏Ç‡∏≤‡∏°‡∏õ‡πâ‡∏≠‡∏°", herb: "‡∏°‡∏∞‡πÅ‡∏ß‡πâ‡∏á, ‡∏°‡∏∞‡∏Ç‡∏≤‡∏°‡∏õ‡πâ‡∏≠‡∏°" },
            { start: [9, 16], end: [10, 15], main: "‡∏ò‡∏≤‡∏ï‡∏∏‡∏ô‡πâ‡∏≥ (‡πÄ‡∏™‡∏°‡∏´‡∏∞)", sub: "‡∏≠‡∏∏‡∏£‡∏∞‡πÄ‡∏™‡∏°‡∏´‡∏∞ (‡∏≠‡∏Å)", icon: "üíß", color: "from-blue-100 to-cyan-100", badge: "bg-blue-500", desc: "‡∏´‡∏≠‡∏ö‡∏´‡∏∑‡∏î ‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏Å‡∏≤‡∏® ‡πÅ‡∏ô‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å", food: "‡∏£‡∏™‡πÄ‡∏ú‡πá‡∏î‡∏£‡πâ‡∏≠‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢: ‡∏´‡∏≠‡∏°‡πÅ‡∏î‡∏á", herb: "‡∏´‡∏ô‡∏∏‡∏°‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏Å‡∏≤‡∏¢" },
            { start: [10, 16], end: [11, 15], main: "‡∏ò‡∏≤‡∏ï‡∏∏‡∏ô‡πâ‡∏≥ (‡πÄ‡∏™‡∏°‡∏´‡∏∞)", sub: "‡∏Ñ‡∏π‡∏ñ‡πÄ‡∏™‡∏°‡∏´‡∏∞ (‡∏•‡∏≥‡πÑ‡∏™‡πâ‡πÉ‡∏´‡∏ç‡πà)", icon: "üíß", color: "from-blue-100 to-cyan-100", badge: "bg-blue-500", desc: "‡∏ó‡πâ‡∏≠‡∏á‡∏ú‡∏π‡∏Å‡∏™‡∏•‡∏±‡∏ö‡∏ó‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢ ‡∏ñ‡πà‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏™‡∏∏‡∏î", food: "‡∏£‡∏™‡∏ù‡∏≤‡∏î/‡πÄ‡∏õ‡∏£‡∏µ‡πâ‡∏¢‡∏ß: ‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡∏ß‡πâ‡∏≤", herb: "‡∏ä‡∏∏‡∏°‡πÄ‡∏´‡πá‡∏î‡πÄ‡∏ó‡∏®, ‡∏™‡∏°‡∏≠‡πÑ‡∏ó‡∏¢" }
        ];

        // Fallback ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏ò‡∏≤‡∏ï‡∏∏‡∏î‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ ‡∏ä‡πà‡∏ß‡∏á‡∏£‡∏≠‡∏¢‡∏ï‡πà‡∏≠)
        const defaultElement = { main: "‡∏ò‡∏≤‡∏ï‡∏∏‡∏î‡∏¥‡∏ô", sub: "‡∏´‡∏ó‡∏±‡∏¢‡∏ß‡∏≤‡∏ï‡∏∞ (‡∏ä‡πà‡∏ß‡∏á‡∏£‡∏≠‡∏¢‡∏ï‡πà‡∏≠)", icon: "‚õ∞Ô∏è", color: "from-yellow-100 to-orange-100", badge: "bg-yellow-800", desc: "‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏î‡∏∏‡∏• ‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠", food: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏¢‡∏á‡πà‡∏≤‡∏¢", herb: "‡∏¢‡∏≤‡∏´‡∏≠‡∏°" };

        function getElement(d, m) {
            // Check range
            for (let rule of elementData) {
                // ‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (StartM == EndM) -> ‡∏¢‡∏≤‡∏Å‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô Logic ‡∏ô‡∏µ‡πâ‡πÅ‡∏ï‡πà‡∏Å‡∏±‡∏ô‡πÑ‡∏ß‡πâ
                if (rule.start[0] === rule.end[0]) {
                    if (m === rule.start[0] && d >= rule.start[1] && d <= rule.end[1]) return rule;
                } 
                // ‡∏Å‡∏£‡∏ì‡∏µ‡∏Ç‡πâ‡∏≤‡∏°‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ (‡πÄ‡∏ä‡πà‡∏ô 16 ‡∏Å.‡∏û. - 15 ‡∏°‡∏µ.‡∏Ñ.)
                else {
                    if ((m === rule.start[0] && d >= rule.start[1]) || (m === rule.end[0] && d <= rule.end[1])) return rule;
                }
            }
            return elementData[0]; // Default ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏ò‡∏≤‡∏ï‡∏∏‡∏ô‡πâ‡∏≥‡∏ä‡πà‡∏ß‡∏á‡∏ï‡πâ‡∏ô‡∏õ‡∏µ‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠
        }

        async function analyze() {
            const dateInput = document.getElementById('birthDate').value;
            if (!dateInput) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö');

            // 1. UI Transition
            document.getElementById('formSection').classList.add('hidden');
            document.getElementById('loadingSection').classList.remove('hidden');

            const date = new Date(dateInput);
            const result = getElement(date.getDate(), date.getMonth() + 1);

            // 2. Mock Delay (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á + ‡πÄ‡∏´‡πá‡∏ô Animation)
            setTimeout(async () => {
                document.getElementById('loadingSection').classList.add('hidden');
                document.getElementById('resultSection').classList.remove('hidden');

                // Update Content
                document.getElementById('resultMain').innerText = result.main;
                document.getElementById('resultSub').innerText = result.sub;
                document.getElementById('resultIcon').innerText = result.icon;
                document.getElementById('resultDesc').innerText = result.desc;
                document.getElementById('foodRec').innerText = result.food;
                document.getElementById('herbRec').innerText = result.herb;
                
                // Update Theme Colors
                document.getElementById('elementBadge').className = `inline-block px-4 py-1 rounded-full text-xs font-bold text-white mb-4 shadow-sm uppercase tracking-wider ${result.badge}`;
                document.body.className = `min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-br ${result.color}`;

                // 3. Send Data to Google Sheet
                try {
                    await fetch(SCRIPT_URL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            userId: "Sadao_User", // ‡∏ñ‡πâ‡∏≤‡∏ï‡πà‡∏≠ LIFF ‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô liff.getDecodedIDToken().sub
                            birthDate: dateInput,
                            element: result.main,
                            subElement: result.sub
                        })
                    });
                } catch (e) {
                    console.log('Save Error (Minor):', e);
                }

            }, 1500); // ‡∏£‡∏≠ 1.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        }
    </script>
</body>
</html>
