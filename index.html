<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏≤‡∏ï‡∏∏‡πÄ‡∏à‡πâ‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏ô - ‡∏£‡∏û.‡∏™‡∏∞‡πÄ‡∏î‡∏≤</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-gold: #D4AF37;
            --deep-green: #1B4D3E;
        }
        body {
            font-family: 'Prompt', sans-serif;
            background: #fdfbf7; /* ‡∏™‡∏µ‡∏Ñ‡∏£‡∏µ‡∏°‡∏≠‡πà‡∏≠‡∏ô‡πÜ ‡∏™‡∏ö‡∏≤‡∏¢‡∏ï‡∏≤ */
            overflow-x: hidden;
            perspective: 1000px; /* ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 3D */
        }
        
        /* ‡∏•‡∏ß‡∏î‡∏•‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏ó‡∏¢‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå */
        .thai-bg {
            background-image: radial-gradient(#1B4D3E 1px, transparent 1px), radial-gradient(#D4AF37 1px, transparent 1px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            opacity: 0.05;
            position: absolute;
            inset: 0;
            z-index: -1;
        }

        /* 3D Card Animation Styles */
        .card-scene {
            width: 100%;
            height: 400px; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 3D */
            position: relative;
            perspective: 1000px;
        }
        
        .card-object {
            width: 100%;
            height: 100%;
            position: absolute;
            transform-style: preserve-3d;
            transition: transform 1.5s cubic-bezier(0.4, 0.2, 0.2, 1);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏∏‡∏ô */
            border-radius: 20px;
            overflow: hidden;
        }

        /* ‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡∏ü‡∏≠‡∏£‡πå‡∏°) */
        .card-front {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(212, 175, 55, 0.3);
            transform: rotateY(0deg);
        }

        /* ‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á (‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå) */
        .card-back {
            background: white;
            transform: rotateY(180deg);
            overflow-y: auto; /* ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÑ‡∏î‡πâ */
        }

        /* Class ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏±‡πà‡∏á‡∏û‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î */
        .is-flipped {
            transform: rotateY(180deg);
        }

        /* Select Box ‡∏™‡∏ß‡∏¢‡πÜ */
        .custom-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
        }

        /* Effect ‡πÅ‡∏™‡∏á‡∏ß‡∏¥‡πâ‡∏á‡πÜ */
        .shine-effect {
            position: relative;
            overflow: hidden;
        }
        .shine-effect::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(to bottom right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.13) 77%, rgba(255,255,255,0) 100%);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }
        @keyframes shine { 0% { transform: translateX(-100%) rotate(45deg); } 100% { transform: translateX(100%) rotate(45deg); } }

        /* Floating 3D Icon */
        .floating-icon {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float { 0% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-10px) rotate(5deg); } 100% { transform: translateY(0px) rotate(0deg); } }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">
    
    <div class="thai-bg"></div>

    <div class="text-center mb-6 z-10 animate-fade-in-down">
        <div class="inline-block p-4 rounded-full bg-white shadow-lg border-2 border-yellow-400 mb-2 relative">
            <i class="fas fa-spa text-4xl text-green-700"></i>
            <div class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full animate-ping"></div>
        </div>
        <h1 class="text-2xl font-bold text-green-900 drop-shadow-sm">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏≤‡∏ï‡∏∏‡πÄ‡∏à‡πâ‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏ô</h1>
        <p class="text-yellow-700 text-sm font-light">‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÅ‡∏ú‡∏ô‡πÑ‡∏ó‡∏¢ ‡∏£‡∏û.‡∏™‡∏∞‡πÄ‡∏î‡∏≤</p>
    </div>

    <div class="card-scene w-full max-w-md">
        <div id="cardObject" class="card-object shadow-2xl rounded-2xl">
            
            <div class="card-face card-front p-6 flex flex-col justify-between">
                <div>
                    <h2 class="text-lg font-bold text-green-800 mb-4 border-b pb-2 border-yellow-200">
                        <i class="fas fa-calendar-check mr-2"></i>‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î
                    </h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="text-xs text-gray-500 ml-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                            <select id="inputDay" class="custom-select w-full p-3 bg-green-50 border border-green-200 rounded-xl text-green-800 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                                </select>
                        </div>

                        <div>
                            <label class="text-xs text-gray-500 ml-1">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</label>
                            <select id="inputMonth" class="custom-select w-full p-3 bg-green-50 border border-green-200 rounded-xl text-green-800 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                                <option value="1">‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°</option>
                                <option value="2">‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå</option>
                                <option value="3">‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°</option>
                                <option value="4">‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô</option>
                                <option value="5">‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°</option>
                                <option value="6">‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô</option>
                                <option value="7">‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°</option>
                                <option value="8">‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°</option>
                                <option value="9">‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô</option>
                                <option value="10">‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°</option>
                                <option value="11">‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô</option>
                                <option value="12">‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°</option>
                            </select>
                        </div>

                        <div>
                            <label class="text-xs text-gray-500 ml-1">‡∏õ‡∏µ ‡∏û.‡∏®.‡πÄ‡∏Å‡∏¥‡∏î</label>
                            <select id="inputYear" class="custom-select w-full p-3 bg-green-50 border border-green-200 rounded-xl text-green-800 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                                </select>
                        </div>
                    </div>
                </div>

                <button onclick="startAnalysis()" class="shine-effect w-full bg-gradient-to-r from-green-700 to-green-600 text-white font-bold py-4 rounded-xl shadow-lg transform active:scale-95 transition-all mt-4">
                    ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå (3D Scan) <i class="fas fa-magic ml-2"></i>
                </button>
            </div>

            <div id="resultFace" class="card-face card-back relative">
                <div id="resultHeader" class="h-32 bg-gradient-to-br from-orange-400 to-red-500 p-4 text-white flex flex-col items-center justify-center rounded-b-[2rem] shadow-md relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-full h-full opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                    
                    <div class="floating-icon text-5xl drop-shadow-lg mb-1" id="resIcon">üî•</div>
                    <h2 class="text-2xl font-bold drop-shadow-md" id="resMain">‡∏ò‡∏≤‡∏ï‡∏∏‡πÑ‡∏ü</h2>
                    <span class="text-xs bg-white/20 px-3 py-1 rounded-full backdrop-blur-sm" id="resSub">‡∏Å‡∏≥‡πÄ‡∏î‡∏≤</span>
                </div>

                <div class="p-6 space-y-4 pb-20"> <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                        <h3 class="text-green-800 font-bold text-sm mb-2"><i class="fas fa-user-md mr-2"></i>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</h3>
                        <p id="resDesc" class="text-gray-600 text-sm leading-relaxed"></p>
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-green-50 p-3 rounded-xl border border-green-100">
                            <div class="text-green-600 text-xl mb-1"><i class="fas fa-leaf"></i></div>
                            <h4 class="font-bold text-green-800 text-xs">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h4>
                            <p id="resFood" class="text-xs text-gray-500 mt-1"></p>
                        </div>
                        <div class="bg-yellow-50 p-3 rounded-xl border border-yellow-100">
                            <div class="text-yellow-600 text-xl mb-1"><i class="fas fa-mortar-pestle"></i></div>
                            <h4 class="font-bold text-yellow-800 text-xs">‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£</h4>
                            <p id="resHerb" class="text-xs text-gray-500 mt-1"></p>
                        </div>
                    </div>

                </div>

                <div class="absolute bottom-0 left-0 w-full p-4 bg-white/90 backdrop-blur border-t">
                    <button onclick="resetCard()" class="w-full py-3 text-gray-500 font-bold hover:text-green-700 transition flex items-center justify-center gap-2">
                        <i class="fas fa-redo"></i> ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÉ‡∏´‡∏°‡πà
                    </button>
                </div>
            </div>

        </div>
    </div>

    <div class="mt-8 text-center text-xs text-gray-400">
        Powered by Google Cloud & Sadao Hospital Innovation
    </div>

    <script>
        // üõ†Ô∏è URL Script ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏≠‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyX7ZJvwflkNzhZ1SPPOJZZcJBvh_Bpbc2acOjh6fEcj58fv9wHu4i9M8J5BoCNmIoDbw/exec';

        // Initialize Dropdowns
        window.onload = function() {
            // 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1-31
            const daySelect = document.getElementById('inputDay');
            for(let i=1; i<=31; i++) {
                let opt = document.createElement('option');
                opt.value = i; opt.innerHTML = i;
                daySelect.appendChild(opt);
            }

            // 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏µ ‡∏û.‡∏®. (‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á 100 ‡∏õ‡∏µ)
            const yearSelect = document.getElementById('inputYear');
            const currentYearBE = new Date().getFullYear() + 543;
            for(let i=0; i<100; i++) {
                let y = currentYearBE - i;
                let opt = document.createElement('option');
                opt.value = y - 543; // Value ‡πÄ‡∏õ‡πá‡∏ô ‡∏Ñ.‡∏®. ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏á‡πà‡∏≤‡∏¢
                opt.innerHTML = y;   // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô ‡∏û.‡∏®.
                yearSelect.appendChild(opt);
            }
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Default ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏≤‡∏¢‡∏∏‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 30 ‡∏õ‡∏µ
            yearSelect.value = (currentYearBE - 30 - 543);
        }

        // üß† Logic ‡∏ò‡∏≤‡∏ï‡∏∏ (‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÅ‡∏•‡πâ‡∏ß)
        const elementData = [
            { start: [1, 1], end: [2, 15], main: "‡∏ô‡πâ‡∏≥ (‡πÄ‡∏´‡∏°‡∏±‡∏ô‡∏ï‡πå)", sub: "‡∏Ñ‡∏π‡∏ñ‡πÄ‡∏™‡∏°‡∏´‡∏∞", icon: "üíß", desc: "‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏±‡∏ö‡∏ñ‡πà‡∏≤‡∏¢ ‡∏ó‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡πâ‡∏≠‡∏á‡∏ú‡∏π‡∏Å‡∏á‡πà‡∏≤‡∏¢", food: "‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡∏ß‡πâ‡∏≤, ‡∏°‡∏∞‡∏•‡∏∞‡∏Å‡∏≠", herb: "‡∏ä‡∏∏‡∏°‡πÄ‡∏´‡πá‡∏î‡πÄ‡∏ó‡∏®", color: "from-blue-400 to-cyan-500" }, // *‡πÅ‡∏Å‡πâ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô 1 ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°
            { start: [2, 16], end: [3, 15], main: "‡πÑ‡∏ü (‡∏Ñ‡∏¥‡∏°‡∏´‡∏±‡∏ô‡∏ï‡πå)", sub: "‡∏û‡∏±‡∏ó‡∏ò‡∏õ‡∏¥‡∏ï‡∏ï‡∏∞", icon: "üî•", desc: "‡∏´‡∏á‡∏∏‡∏î‡∏´‡∏á‡∏¥‡∏î‡∏á‡πà‡∏≤‡∏¢ ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏¢‡πà‡∏≠‡∏¢ ‡∏ô‡πâ‡∏≥‡∏î‡∏µ‡∏û‡∏¥‡∏Å‡∏≤‡∏£", food: "‡∏°‡∏∞‡∏£‡∏∞‡∏Ç‡∏µ‡πâ‡∏ô‡∏Å, ‡∏™‡∏∞‡πÄ‡∏î‡∏≤", herb: "‡∏ö‡∏£‡πÄ‡∏û‡πá‡∏î", color: "from-orange-400 to-red-500" },
            { start: [3, 16], end: [4, 15], main: "‡πÑ‡∏ü (‡∏Ñ‡∏¥‡∏°‡∏´‡∏±‡∏ô‡∏ï‡πå)", sub: "‡∏≠‡∏û‡∏±‡∏ó‡∏ò‡∏õ‡∏¥‡∏ï‡∏ï‡∏∞", icon: "üî•", desc: "‡∏à‡∏∏‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏î ‡πÅ‡∏ô‡πà‡∏ô‡∏ó‡πâ‡∏≠‡∏á ‡∏Å‡∏£‡∏î‡πÑ‡∏´‡∏•‡∏¢‡πâ‡∏≠‡∏ô", food: "‡∏ï‡∏≥‡∏•‡∏∂‡∏á, ‡∏ö‡∏ß‡∏ö, ‡∏ú‡∏±‡∏Å‡∏ö‡∏∏‡πâ‡∏á", herb: "‡∏Ç‡∏°‡∏¥‡πâ‡∏ô‡∏ä‡∏±‡∏ô", color: "from-orange-400 to-red-500" },
            { start: [4, 16], end: [5, 15], main: "‡πÑ‡∏ü (‡∏Ñ‡∏¥‡∏°‡∏´‡∏±‡∏ô‡∏ï‡πå)", sub: "‡∏Å‡∏≥‡πÄ‡∏î‡∏≤", icon: "üî•", desc: "‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏Ç‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡πÅ‡∏û‡πâ‡πÅ‡∏î‡∏î ‡∏õ‡∏ß‡∏î‡∏´‡∏±‡∏ß‡πÑ‡∏°‡πÄ‡∏Å‡∏£‡∏ô", food: "‡πÅ‡∏ï‡∏á‡πÇ‡∏°, ‡∏ü‡∏±‡∏Å‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß", herb: "‡πÉ‡∏ö‡∏ö‡∏±‡∏ß‡∏ö‡∏Å, ‡∏£‡∏≤‡∏á‡∏à‡∏∑‡∏î", color: "from-orange-400 to-red-500" },
            { start: [5, 16], end: [6, 15], main: "‡∏•‡∏° (‡∏ß‡∏™‡∏±‡∏ô‡∏ï‡πå)", sub: "‡∏´‡∏ó‡∏±‡∏¢‡∏ß‡∏≤‡∏ï‡∏∞", icon: "üå¨Ô∏è", desc: "‡πÉ‡∏à‡∏™‡∏±‡πà‡∏ô ‡∏ß‡∏¥‡∏ï‡∏Å‡∏Å‡∏±‡∏á‡∏ß‡∏• ‡∏ô‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏´‡∏•‡∏±‡∏ö", food: "‡∏Ç‡∏¥‡∏á, ‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤, ‡πÇ‡∏´‡∏£‡∏∞‡∏û‡∏≤", herb: "‡∏î‡∏≠‡∏Å‡∏°‡∏∞‡∏•‡∏¥, ‡πÄ‡∏Å‡∏™‡∏£‡∏ó‡∏±‡πâ‡∏á 5", color: "from-green-400 to-emerald-600" },
            { start: [6, 16], end: [7, 15], main: "‡∏•‡∏° (‡∏ß‡∏™‡∏±‡∏ô‡∏ï‡πå)", sub: "‡∏™‡∏±‡∏ï‡∏ñ‡∏Å‡∏ß‡∏≤‡∏ï‡∏∞", icon: "üå¨Ô∏è", desc: "‡∏õ‡∏ß‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏Ç‡πá‡∏°‡πÅ‡∏ó‡∏á ‡πÄ‡∏à‡πá‡∏ö‡πÅ‡∏õ‡∏•‡∏ö", food: "‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢, ‡∏î‡∏µ‡∏õ‡∏•‡∏µ", herb: "‡πÑ‡∏û‡∏•, ‡πÄ‡∏ñ‡∏≤‡∏ß‡∏±‡∏•‡∏¢‡πå‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏á", color: "from-green-400 to-emerald-600" },
            { start: [7, 16], end: [8, 15], main: "‡∏•‡∏° (‡∏ß‡∏™‡∏±‡∏ô‡∏ï‡πå)", sub: "‡∏™‡∏∏‡∏°‡∏ô‡∏≤‡∏ß‡∏≤‡∏ï‡∏∞", icon: "üå¨Ô∏è", desc: "‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏∑‡∏î ‡∏ß‡∏¥‡∏á‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô ‡πÑ‡∏´‡∏•‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡πÑ‡∏°‡πà‡∏î‡∏µ", food: "‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ, ‡∏Ç‡πà‡∏≤", herb: "‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢‡∏î‡∏≥, ‡∏Ç‡∏¥‡∏á‡πÅ‡∏Å‡πà", color: "from-green-400 to-emerald-600" },
            { start: [8, 16], end: [9, 15], main: "‡∏ô‡πâ‡∏≥ (‡πÄ‡∏´‡∏°‡∏±‡∏ô‡∏ï‡πå)", sub: "‡∏®‡∏≠‡πÄ‡∏™‡∏°‡∏´‡∏∞", icon: "üíß", desc: "‡πÄ‡∏à‡πá‡∏ö‡∏Ñ‡∏≠‡∏ö‡πà‡∏≠‡∏¢ ‡πÑ‡∏≠ ‡∏°‡∏µ‡πÄ‡∏™‡∏°‡∏´‡∏∞", food: "‡∏°‡∏∞‡∏ô‡∏≤‡∏ß, ‡∏°‡∏∞‡∏Ç‡∏≤‡∏°‡∏õ‡πâ‡∏≠‡∏°", herb: "‡∏°‡∏∞‡πÅ‡∏ß‡πâ‡∏á", color: "from-blue-400 to-cyan-500" },
            { start: [9, 16], end: [10, 15], main: "‡∏ô‡πâ‡∏≥ (‡πÄ‡∏´‡∏°‡∏±‡∏ô‡∏ï‡πå)", sub: "‡∏≠‡∏∏‡∏£‡∏∞‡πÄ‡∏™‡∏°‡∏´‡∏∞", icon: "üíß", desc: "‡∏´‡∏≠‡∏ö‡∏´‡∏∑‡∏î ‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏Å‡∏≤‡∏® ‡πÅ‡∏ô‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å", food: "‡∏´‡∏≠‡∏°‡πÅ‡∏î‡∏á, ‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°", herb: "‡∏´‡∏ô‡∏∏‡∏°‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏Å‡∏≤‡∏¢", color: "from-blue-400 to-cyan-500" },
            { start: [10, 16], end: [11, 15], main: "‡∏ô‡πâ‡∏≥ (‡πÄ‡∏´‡∏°‡∏±‡∏ô‡∏ï‡πå)", sub: "‡∏Ñ‡∏π‡∏ñ‡πÄ‡∏™‡∏°‡∏´‡∏∞", icon: "üíß", desc: "‡∏ó‡πâ‡∏≠‡∏á‡∏ú‡∏π‡∏Å‡∏™‡∏•‡∏±‡∏ö‡∏ó‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢ ‡∏ñ‡πà‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏™‡∏∏‡∏î", food: "‡πÄ‡∏°‡πá‡∏î‡πÅ‡∏°‡∏á‡∏•‡∏±‡∏Å, ‡∏™‡πâ‡∏°‡πÇ‡∏≠", herb: "‡∏™‡∏°‡∏≠‡πÑ‡∏ó‡∏¢", color: "from-blue-400 to-cyan-500" },
            { start: [11, 16], end: [12, 15], main: "‡∏î‡∏¥‡∏ô (‡∏£‡∏≠‡∏¢‡∏ï‡πà‡∏≠)", sub: "‡∏ò‡∏≤‡∏ï‡∏∏‡∏´‡∏ô‡∏±‡∏Å", icon: "‚õ∞Ô∏è", desc: "‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏´‡∏ô‡∏±‡∏Å ‡∏≠‡∏∑‡∏î‡∏≠‡∏≤‡∏î ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏î‡∏∏‡∏•", food: "‡∏ú‡∏±‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏≤‡∏Å‡∏™‡∏µ", herb: "‡∏ï‡∏£‡∏µ‡∏ú‡∏•‡∏≤", color: "from-yellow-600 to-brown-500" }, // *‡πÄ‡∏û‡∏¥‡πà‡∏°
             // ... ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏ß‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
        ];

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡∏´‡∏≤‡∏ò‡∏≤‡∏ï‡∏∏
        function getElement(d, m) {
            for(let rule of elementData) {
                // Logic ‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö MVP: ‡πÄ‡∏ä‡πá‡∏Ñ‡πÅ‡∏Ñ‡πà‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°/‡∏à‡∏ö (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß)
                // ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πä‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Logic ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°
                 if (m === rule.start[0]) return rule; 
            }
            return elementData[0]; // Fallback
        }

        async function startAnalysis() {
            // 1. ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Dropdown
            const d = parseInt(document.getElementById('inputDay').value);
            const m = parseInt(document.getElementById('inputMonth').value);
            const y = parseInt(document.getElementById('inputYear').value);

            // Create Date Object for saving
            const birthDateStr = `${y}-${String(m).padStart(2,'0')}-${String(d).padStart(2,'0')}`;

            // 2. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
            const result = getElement(d, m);

            // 3. Update UI (‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î)
            document.getElementById('resMain').innerText = result.main;
            document.getElementById('resSub').innerText = result.sub;
            document.getElementById('resIcon').innerText = result.icon;
            document.getElementById('resDesc').innerText = result.desc;
            document.getElementById('resFood').innerText = result.food;
            document.getElementById('resHerb').innerText = result.herb;
            
            // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ Header ‡∏ï‡∏≤‡∏°‡∏ò‡∏≤‡∏ï‡∏∏
            const header = document.getElementById('resultHeader');
            header.className = `h-32 bg-gradient-to-br ${result.color} p-4 text-white flex flex-col items-center justify-center rounded-b-[2rem] shadow-md relative overflow-hidden transition-all duration-1000`;

            // 4. Trigger 3D Animation (Flip)
            const card = document.getElementById('cardObject');
            card.classList.add('is-flipped'); // ‡∏û‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î!

            // 5. Save Data (‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡πÜ)
            try {
                fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ userId: "Guest", birthDate: birthDateStr, element: result.main, subElement: result.sub })
                });
            } catch(e) {}
        }

        function resetCard() {
            document.getElementById('cardObject').classList.remove('is-flipped');
        }
    </script>
</body>
</html>
