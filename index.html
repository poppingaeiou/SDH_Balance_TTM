<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏≤‡∏ï‡∏∏‡πÄ‡∏à‡πâ‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏ô (Sadao Official)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&family=Sarabun:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --gold-main: #D4AF37; 
            --gold-light: #FFF8E1;
            --green-deep: #1B4D3E; 
            --green-leaf: #2E7D32;
            --white-card: #FFFFFF;
        }
        
        body { 
            font-family: 'Prompt', sans-serif; 
            background-color: #FDFBF7;
            background-image: 
                radial-gradient(var(--gold-main) 0.5px, transparent 0.5px), 
                radial-gradient(var(--green-deep) 0.5px, transparent 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            overflow-y: auto;
            color: #333;
        }

        .thai-pattern {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23D4AF37' fill-opacity='0.08'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none; z-index: -1;
        }

        /* 3D Card Scene */
        .card-scene { 
            width: 100%; max-width: 420px; margin: 0 auto;
            min-height: 80vh; perspective: 1500px; 
            padding: 20px 0;
        }

        .card-object { 
            width: 100%; position: relative; 
            transform-style: preserve-3d; 
            transition: transform 1.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); 
        }
        
        .card-face { 
            width: 100%; border-radius: 30px; 
            backface-visibility: hidden; 
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 
                0 20px 50px rgba(27, 77, 62, 0.15),
                0 0 0 1px rgba(212, 175, 55, 0.2) inset;
            overflow: hidden;
        }
        
        .card-front { transform: rotateY(0deg); padding: 30px; min-height: 550px; display: flex; flex-direction: column; justify-content: center;}
        .card-back { 
            position: absolute; top: 0; left: 0; height: 100%; 
            transform: rotateY(180deg); display: flex; flex-direction: column; 
        }
        
        .is-flipped { transform: rotateY(180deg); }

        /* Logo Animation - ‡∏Ñ‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡πÑ‡∏ß‡πâ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ç‡∏≠ */
        .logo-container {
            width: 100px; height: 100px; margin: 0 auto 15px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 2px solid var(--gold-main);
            overflow: hidden;
            background-color: white; /* ‚úÖ ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≤‡∏ß */
        }
        .logo-img { width: 90%; height: auto; object-fit: contain; }

        /* Custom Inputs */
        .input-group { position: relative; margin-bottom: 20px; }
        .input-label { 
            position: absolute; top: -10px; left: 15px; 
            background: white; padding: 0 8px; 
            color: var(--green-deep); font-size: 12px; font-weight: bold;
            border-radius: 4px; z-index: 2;
        }
        .custom-select { 
            width: 100%; padding: 16px; border: 1.5px solid #E0E0E0; 
            border-radius: 16px; font-family: 'Prompt'; font-size: 16px; color: #333;
            appearance: none; background-color: #FAFAFA;
            transition: all 0.3s;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23D4AF37' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 1rem center; background-repeat: no-repeat; background-size: 1.2em;
        }
        .custom-select:focus { border-color: var(--gold-main); box-shadow: 0 0 0 4px rgba(212, 175, 55, 0.1); outline: none; background-color: white; }

        /* Button 3D */
        .btn-gold {
            background: linear-gradient(135deg, var(--green-deep) 0%, #2E7D32 100%);
            color: white; border: none; padding: 18px; width: 100%;
            border-radius: 16px; font-size: 18px; font-weight: bold;
            box-shadow: 0 10px 20px rgba(27, 77, 62, 0.3);
            cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
            position: relative; overflow: hidden;
        }
        .btn-gold::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(255,255,255,0.2), transparent);
            opacity: 0; transition: opacity 0.2s;
        }
        .btn-gold:active { transform: scale(0.98); box-shadow: 0 5px 10px rgba(27, 77, 62, 0.2); }

        /* Results Styling */
        .back-header { 
            background: linear-gradient(135deg, var(--green-deep), #0f3025);
            padding: 30px 20px 50px; text-align: center; color: white;
            border-radius: 0 0 40% 40% / 0 0 30px 30px;
            position: relative; flex-shrink: 0;
        }
        
        /* ‚úÖ Avatar Style with Background Removal Trick */
        .avatar-real {
            width: 160px; height: 160px; margin: -10px auto 10px;
            object-fit: contain;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.2));
            animation: float 4s ease-in-out infinite;
            
            /* üî• ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ: ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∑‡∏ô‡∏Å‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
            mix-blend-mode: multiply; 
            /* ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏î‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏≠‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏•‡πà‡πÄ‡∏â‡∏î‡∏™‡∏µ */
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }

        .back-content { 
            flex-grow: 1; overflow-y: auto; padding: 20px; 
            margin-top: -40px; z-index: 10;
            -webkit-overflow-scrolling: touch;
        }
        
        .info-card {
            background: white; border-radius: 20px; padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid rgba(0,0,0,0.03);
        }
        .info-title { 
            font-size: 14px; font-weight: bold; color: var(--green-deep); 
            display: flex; align-items: center; margin-bottom: 10px;
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        .info-title i { margin-right: 8px; font-size: 16px; color: var(--gold-main); }
        
        .lunar-badge {
            background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2);
            padding: 5px 15px; border-radius: 20px;
            font-size: 12px; color: #FFD700; display: inline-block;
            backdrop-filter: blur(4px);
        }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen">
    <div class="thai-pattern"></div>

    <div class="text-center mb-6 z-10 animate-fade-in-down mt-10">
        <div class="logo-container">
            <img src="https://img5.pic.in.th/file/secure-sv1/2613be45e1aa0f1e99dd6a6f89e87139.png" alt="Logo" class="logo-img">
        </div>
        <h1 class="text-2xl font-bold text-gray-800 tracking-wide">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏≤‡∏ï‡∏∏‡πÄ‡∏à‡πâ‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏ô</h1>
        <p class="text-yellow-700 text-sm font-medium mt-1">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÅ‡∏ú‡∏ô‡πÑ‡∏ó‡∏¢‡∏Ø ‡∏£‡∏û.‡∏™‡∏∞‡πÄ‡∏î‡∏≤</p>
    </div>

    <div class="card-scene">
        <div id="cardObject" class="card-object">
            
            <div class="card-face card-front">
                <div class="text-center mb-8">
                    <h2 class="text-xl font-bold text-gray-800">‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
                    <div class="h-1 w-20 bg-gradient-to-r from-yellow-400 to-yellow-600 mx-auto mt-3 rounded-full"></div>
                    <p class="text-xs text-gray-400 mt-4 leading-relaxed">
                        ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏ô‡∏ó‡∏≤‡∏á‡∏à‡∏±‡∏ô‡∏ó‡∏£‡∏Ñ‡∏ï‡∏¥ (‡∏Ç‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô-‡∏Ç‡πâ‡∏≤‡∏á‡πÅ‡∏£‡∏°)<br>
                        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ò‡∏≤‡∏ï‡∏∏‡∏£‡∏∞‡∏Ñ‡∏ô‡∏ï‡∏≤‡∏°‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÅ‡∏ú‡∏ô‡πÑ‡∏ó‡∏¢
                    </p>
                </div>

                <div class="input-group">
                    <span class="input-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</span>
                    <select id="inputDay" class="custom-select"></select>
                </div>
                
                <div class="input-group">
                    <span class="input-label">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</span>
                    <select id="inputMonth" class="custom-select">
                        <option value="1">‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°</option>
                        <option value="2">‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå</option>
                        <option value="3">‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°</option>
                        <option value="4">‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô</option>
                        <option value="5">‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°</option>
                        <option value="6">‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô</option>
                        <option value="7">‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°</option>
                        <option value="8">‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°</option>
                        <option value="9">‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô</option>
                        <option value="10">‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°</option>
                        <option value="11">‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô</option>
                        <option value="12">‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°</option>
                    </select>
                </div>

                <div class="input-group">
                    <span class="input-label">‡∏õ‡∏µ ‡∏û.‡∏®.‡πÄ‡∏Å‡∏¥‡∏î</span>
                    <select id="inputYear" class="custom-select"></select>
                </div>

                <button onclick="startAnalysis()" class="btn-gold mt-4">
                    <span>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå (‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)</span> <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>

            <div id="resultFace" class="card-face card-back">
                <div id="resultHeader" class="back-header">
                    <img id="avatarImg" src="" class="avatar-real hidden">
                    
                    <h2 class="text-2xl font-bold text-white drop-shadow-md" id="resMain">...</h2>
                    <p class="text-white/90 text-xs mt-2 px-4 leading-relaxed font-light" id="resSub">...</p>
                    <div class="mt-3">
                        <span class="lunar-badge"><i class="fas fa-moon mr-1"></i> <span id="lunarInfo">...</span></span>
                    </div>
                </div>

                <div class="back-content">
                    <div class="info-card">
                        <div class="info-title"><i class="fas fa-heartbeat"></i> ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ</div>
                        <p id="resDesc" class="text-sm text-gray-600 leading-relaxed"></p>
                    </div>

                    <div class="grid grid-cols-2 gap-3 mb-3">
                        <div class="info-card !mb-0 !p-3">
                            <div class="info-title !text-xs"><i class="fas fa-user-circle"></i> ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏ô‡∏¥‡∏™‡∏±‡∏¢</div>
                            <p id="resTrait" class="text-xs text-gray-500 leading-relaxed"></p>
                        </div>
                        <div class="info-card !mb-0 !p-3" style="background: #FFFBFB; border-color: #FFEBEE;">
                            <div class="info-title !text-xs" style="color: #D32F2F;"><i class="fas fa-exclamation-triangle" style="color:#D32F2F;"></i> ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á</div>
                            <p id="resAvoid" class="text-xs text-gray-500 leading-relaxed"></p>
                        </div>
                    </div>

                    <div class="info-card" style="background: #FDFAF2; border-color: #F9F1D8;">
                        <div class="info-title" style="color: #8D6E63;"><i class="fas fa-utensils"></i> ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏î‡∏∏‡∏•</div>
                        <p id="resFood" class="text-sm text-gray-600 leading-relaxed"></p>
                    </div>
                </div>

                <div class="p-4 bg-white border-t z-20">
                    <p class="text-[10px] text-center text-gray-400 mb-2">‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô ‡∏£‡∏û.‡∏™‡∏∞‡πÄ‡∏î‡∏≤ & ‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢</p>
                    <button onclick="resetCard()" class="w-full py-3 rounded-xl bg-gray-100 text-gray-600 font-bold hover:bg-gray-200 transition">
                        <i class="fas fa-redo mr-1"></i> ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÉ‡∏´‡∏°‡πà
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyX7ZJvwflkNzhZ1SPPOJZZcJBvh_Bpbc2acOjh6fEcj58fv9wHu4i9M8J5BoCNmIoDbw/exec'; 

        window.onload = function() {
            const daySelect = document.getElementById('inputDay');
            for(let i=1; i<=31; i++) { let opt = document.createElement('option'); opt.value = i; opt.innerHTML = i; daySelect.appendChild(opt); }
            
            const yearSelect = document.getElementById('inputYear');
            const currentYearBE = new Date().getFullYear() + 543;
            // Setup ‡∏õ‡∏µ ‡∏û.‡∏®. (Value = ‡∏õ‡∏µ ‡∏Ñ.‡∏®. ‡∏à‡∏£‡∏¥‡∏á)
            for(let i=0; i<100; i++) { 
                let yBE = currentYearBE - i;
                let yAD = yBE - 543;
                let opt = document.createElement('option'); 
                opt.value = yAD; 
                opt.innerHTML = yBE; 
                yearSelect.appendChild(opt); 
            }
            yearSelect.value = (currentYearBE - 30 - 543);
        }

        // ==========================================
        // 1. High Precision Lunar Calculation (Dynamic Rollover)
        // ==========================================
        function calculateRealLunarDate(day, month, yearAD) {
            const date = new Date(yearAD, month - 1, day);
            const knownNewMoon = new Date(2000, 0, 6, 18, 14, 0); 
            const diffTime = date.getTime() - knownNewMoon.getTime();
            const diffDays = diffTime / (1000 * 3600 * 24);
            const synodicMonth = 29.53059;
            
            let moonAge = diffDays % synodicMonth;
            if (moonAge < 0) moonAge += synodicMonth;
            
            // Calibration Offset (+0.5 days)
            moonAge += 0.5; 
            if (moonAge > synodicMonth) moonAge -= synodicMonth;

            let phase = "";
            let lunarDay = 0;
            const roundedAge = Math.floor(moonAge) + 1;
            
            if (roundedAge <= 15) {
                phase = "Waxing"; lunarDay = roundedAge;
            } else {
                phase = "Waning"; lunarDay = roundedAge - 15;
            }
            
            // Base Month Mapping
            const monthMap = { 12: 1, 1: 2, 2: 3, 3: 4, 4: 5, 5: 6, 6: 7, 7: 8, 8: 9, 9: 10, 10: 11, 11: 12 };
            let thaiMonth = monthMap[month];

            // ‚ö†Ô∏è Dynamic Rollover Logic:
            if (phase === "Waxing" && day > 15) {
                thaiMonth += 1;
                if (thaiMonth > 12) thaiMonth = 1;
            }

            const thaiNums = ["‡πê","‡πë","‡πí","‡πì","‡πî","‡πï","‡πñ","‡πó","‡πò","‡πô"];
            const toThaiNum = (num) => num.toString().split('').map(d => thaiNums[d] || d).join('');

            return {
                phase: phase, lunarDay: lunarDay, thaiMonth: thaiMonth,
                display: `${phase === "Waxing" ? "‡∏Ç‡∏∂‡πâ‡∏ô" : "‡πÅ‡∏£‡∏°"} ${toThaiNum(lunarDay)} ‡∏Ñ‡πà‡∏≥ ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ${toThaiNum(thaiMonth)}`
            };
        }

        // ==========================================
        // 2. Comprehensive Database (URLs from User)
        // ==========================================
        const sadaoData = [
            // --- 1. ‡∏®‡∏¥‡∏®‡∏¥‡∏£‡∏§‡∏î‡∏π (‡∏ô‡πâ‡∏≥‡∏£‡∏∞‡∏Ñ‡∏ô‡πÑ‡∏ü) -> ‡∏ò‡∏≤‡∏ï‡∏∏‡∏î‡∏¥‡∏ô 1-2 ---
            { startM: 2, startP: "Waning", endM: 4, endP: "Waxing", 
              main: "‡∏ò‡∏≤‡∏ï‡∏∏‡∏î‡∏¥‡∏ô (‡∏õ‡∏ñ‡∏ß‡∏µ)", 
              sub: "‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏´‡πà‡∏á‡πÄ‡∏™‡∏°‡∏´‡∏∞‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏ï‡∏ï‡∏∞‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô‡∏£‡∏∞‡∏Ñ‡∏ô‡∏Å‡∏±‡∏ô",
              color: "linear-gradient(135deg, #8D6E63, #5D4037)",
              avatarUrl: "https://img2.pic.in.th/344b40c69021fa3e3486df08c9b0aaa4.jpg", // Earth
              desc: "‡∏ò‡∏≤‡∏ï‡∏∏‡πÑ‡∏ü‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏ó‡∏£‡∏Å ‡∏≠‡∏≤‡∏à‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏´‡∏•‡∏ß‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡∏•‡∏≥‡πÑ‡∏™‡πâ‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô ‡∏™‡∏ï‡∏£‡∏µ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô",
              avoid: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏™‡∏•‡∏á ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏™‡∏à‡∏±‡∏î ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏±‡∏Å‡∏î‡∏≠‡∏á",
              trait: "‡∏à‡∏¥‡∏ï‡πÉ‡∏à‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏ô‡πà‡∏ô‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á ‡∏î‡∏∑‡πâ‡∏≠‡∏£‡∏±‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢",
              food: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏™‡∏ù‡∏≤‡∏î‡∏™‡∏°‡∏≤‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡∏ß‡πâ‡∏≤‡∏î‡∏¥‡∏ö ‡∏ô‡πâ‡∏≥‡∏ù‡∏£‡∏±‡πà‡∏á ‡∏¢‡∏≥‡∏´‡∏±‡∏ß‡∏õ‡∏•‡∏µ" },

            // --- 2. ‡∏Ñ‡∏¥‡∏°‡∏´‡∏±‡∏ô‡∏ï‡∏§‡∏î‡∏π (‡πÑ‡∏ü‡∏£‡∏∞‡∏Ñ‡∏ô‡∏ô‡πâ‡∏≥) -> ‡∏ò‡∏≤‡∏ï‡∏∏‡πÑ‡∏ü 4-5 ---
            { startM: 4, startP: "Waning", endM: 6, endP: "Waxing", 
              main: "‡∏ò‡∏≤‡∏ï‡∏∏‡πÑ‡∏ü (‡πÄ‡∏ï‡πÇ‡∏ä)", 
              sub: "‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏´‡πà‡∏á‡∏õ‡∏¥‡∏ï‡∏ï‡∏∞‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏°‡∏´‡∏∞‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô‡∏£‡∏∞‡∏Ñ‡∏ô‡∏Å‡∏±‡∏ô",
              color: "linear-gradient(135deg, #FF7043, #D84315)",
              avatarUrl: "https://img5.pic.in.th/file/secure-sv1/58138bccc52a7d293a8fabde7b9aca26.jpg", // Fire
              desc: "‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏° ‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏∑‡∏î ‡πÑ‡∏Ç‡πâ‡πÅ‡∏î‡∏î ‡∏£‡πâ‡∏≠‡∏ô‡πÉ‡∏ô ‡∏´‡∏•‡∏±‡∏ö‡∏¢‡∏≤‡∏Å ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏™‡∏π‡∏á",
              avoid: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏™‡πÄ‡∏ú‡πá‡∏î‡∏£‡πâ‡∏≠‡∏ô‡∏à‡∏±‡∏î ‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î ‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÇ‡∏°‡πÇ‡∏´ ‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡∏Æ‡∏≠‡∏•‡πå",
              trait: "‡∏£‡∏π‡∏õ‡∏£‡πà‡∏≤‡∏á‡∏™‡∏°‡∏™‡πà‡∏ß‡∏ô ‡∏ú‡∏¥‡∏ß‡∏Ç‡∏≤‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á ‡∏û‡∏π‡∏î‡∏ä‡∏±‡∏î ‡∏´‡∏¥‡∏ß‡∏ö‡πà‡∏≠‡∏¢ ‡∏Å‡∏¥‡∏ô‡∏à‡∏∏ ‡∏Ç‡∏µ‡πâ‡∏´‡∏á‡∏∏‡∏î‡∏´‡∏á‡∏¥‡∏î ‡πÇ‡∏Å‡∏£‡∏ò‡∏á‡πà‡∏≤‡∏¢‡∏´‡∏≤‡∏¢‡πÄ‡∏£‡πá‡∏ß",
              food: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏™‡∏à‡∏∑‡∏î ‡πÄ‡∏¢‡πá‡∏ô ‡∏Ç‡∏° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏±‡∏ö‡∏û‡∏¥‡∏©‡∏£‡πâ‡∏≠‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏ï‡∏á‡πÇ‡∏° ‡∏ï‡πâ‡∏°‡∏à‡∏∑‡∏î‡∏ü‡∏±‡∏Å ‡∏ô‡πâ‡∏≥‡πÄ‡∏Å‡πä‡∏Å‡∏Æ‡∏ß‡∏¢" },

            // --- 3. ‡∏ß‡∏™‡∏±‡∏ô‡∏ï‡∏§‡∏î‡∏π (‡πÑ‡∏ü‡∏£‡∏∞‡∏Ñ‡∏ô‡∏•‡∏°) -> ‡∏ò‡∏≤‡∏ï‡∏∏‡πÑ‡∏ü 6-7 ---
            { startM: 6, startP: "Waning", endM: 8, endP: "Waxing", 
              main: "‡∏ò‡∏≤‡∏ï‡∏∏‡πÑ‡∏ü (‡πÄ‡∏ï‡πÇ‡∏ä)", 
              sub: "‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏´‡πà‡∏á‡∏õ‡∏¥‡∏ï‡∏ï‡∏∞‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏ï‡∏∞‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô‡∏£‡∏∞‡∏Ñ‡∏ô‡∏Å‡∏±‡∏ô",
              color: "linear-gradient(135deg, #FFAB91, #E64A19)",
              avatarUrl: "https://img5.pic.in.th/file/secure-sv1/58138bccc52a7d293a8fabde7b9aca26.jpg", // Fire
              desc: "‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÇ‡∏•‡∏´‡∏¥‡∏ï‡∏≠‡∏≤‡∏à‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô ‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á‡∏á‡πà‡∏≤‡∏¢ ‡∏ô‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏ö‡∏¢‡∏≤‡∏Å",
              avoid: "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏™‡∏à‡∏±‡∏î‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ",
              trait: "‡∏Ñ‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏Ñ‡∏•‡πà‡∏ß ‡∏ß‡πà‡∏≠‡∏á‡πÑ‡∏ß ‡∏ú‡∏°‡∏´‡∏á‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡∏±‡∏¢",
              food: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏™‡∏Ç‡∏°‡πÄ‡∏¢‡πá‡∏ô ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡∏°‡∏∞‡∏£‡∏∞ ‡∏ö‡∏£‡πÄ‡∏û‡πá‡∏î ‡πÉ‡∏ö‡∏ö‡∏±‡∏ß‡∏ö‡∏Å" },

            // --- 4. ‡∏ß‡∏™‡∏™‡∏≤‡∏ô‡∏§‡∏î‡∏π (‡∏•‡∏°‡∏£‡∏∞‡∏Ñ‡∏ô‡πÑ‡∏ü) -> ‡∏ò‡∏≤‡∏ï‡∏∏‡∏•‡∏° 8-9 ---
            { startM: 8, startP: "Waning", endM: 10, endP: "Waxing", 
              main: "‡∏ò‡∏≤‡∏ï‡∏∏‡∏•‡∏° (‡∏ß‡∏≤‡πÇ‡∏¢)", 
              sub: "‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏´‡πà‡∏á‡∏ß‡∏≤‡∏ï‡∏∞‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏ï‡∏ï‡∏∞‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô‡∏£‡∏∞‡∏Ñ‡∏ô‡∏Å‡∏±‡∏ô",
              color: "linear-gradient(135deg, #81C784, #388E3C)",
              avatarUrl: "https://img2.pic.in.th/e8f1ca35d7d696de4c583ccb76dadd92.jpg", // Wind
              desc: "‡∏ó‡πâ‡∏≠‡∏á‡∏≠‡∏∑‡∏î ‡πÅ‡∏ô‡πà‡∏ô‡∏ó‡πâ‡∏≠‡∏á ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏¢‡πà‡∏≠‡∏¢ ‡πÄ‡∏£‡∏≠‡πÄ‡∏´‡∏°‡πá‡∏ô‡πÄ‡∏õ‡∏£‡∏µ‡πâ‡∏¢‡∏ß ‡∏•‡∏°‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡πÄ‡∏û‡∏≤‡∏∞‡πÄ‡∏¢‡∏≠‡∏∞",
              avoid: "‡πÄ‡∏Ñ‡∏µ‡πâ‡∏¢‡∏ß‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡∏ó‡∏≤‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î",
              trait: "‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡πÄ‡∏£‡πá‡∏ß ‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô",
              food: "‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡∏Ç‡∏±‡∏ö‡∏•‡∏° ‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡∏¥‡∏á ‡∏Ç‡πà‡∏≤ ‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ ‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤" },

            // --- 5. ‡∏™‡∏≤‡∏£‡∏ó‡∏§‡∏î‡∏π (‡∏•‡∏°‡∏£‡∏∞‡∏Ñ‡∏ô‡∏ô‡πâ‡∏≥) -> ‡∏ò‡∏≤‡∏ï‡∏∏‡∏ô‡πâ‡∏≥ 10-11 ---
            { startM: 10, startP: "Waning", endM: 12, endP: "Waxing", 
              main: "‡∏ò‡∏≤‡∏ï‡∏∏‡∏ô‡πâ‡∏≥ (‡∏≠‡∏≤‡πÇ‡∏õ)", 
              sub: "‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏´‡πà‡∏á‡∏ß‡∏≤‡∏ï‡∏∞‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏°‡∏´‡∏∞‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô‡∏£‡∏∞‡∏Ñ‡∏ô‡∏Å‡∏±‡∏ô",
              color: "linear-gradient(135deg, #42A5F5, #1565C0)",
              avatarUrl: "https://img5.pic.in.th/file/secure-sv1/691ab2bc8bd127f21c3a91c0439629ef.jpg", // Water
              desc: "‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏ß‡∏î‡πÉ‡∏ô‡∏Ç‡πâ‡∏≠ ‡∏õ‡∏ß‡∏î‡πÄ‡∏Ç‡πà‡∏≤ ‡∏õ‡∏ß‡∏î‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å ‡∏£‡∏¥‡∏î‡∏™‡∏µ‡∏î‡∏ß‡∏á ‡∏ù‡∏µ ‡∏™‡∏¥‡∏ß",
              avoid: "‡∏£‡∏™‡∏´‡∏ß‡∏≤‡∏ô‡∏à‡∏±‡∏î ‡∏°‡∏±‡∏ô‡∏à‡∏±‡∏î ‡πÄ‡∏Ñ‡πá‡∏°‡∏à‡∏±‡∏î ‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡πà‡∏á‡∏ô‡∏≤‡∏ô‡πÜ",
              trait: "‡∏£‡∏π‡∏õ‡∏£‡πà‡∏≤‡∏á‡∏≠‡∏ß‡∏ö ‡∏ú‡∏¥‡∏ß‡∏Ç‡∏≤‡∏ß ‡∏ï‡∏≤‡πÇ‡∏ï ‡∏û‡∏π‡∏î‡∏ä‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏û‡πÄ‡∏£‡∏≤‡∏∞ ‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏ä‡πâ‡∏≤ ‡∏ú‡∏°‡∏™‡∏ß‡∏¢‡∏î‡∏Å‡∏î‡∏≥",
              food: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏™‡πÄ‡∏ö‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏≤ (‡πÅ‡∏Å‡πâ‡∏õ‡∏ß‡∏î) ‡∏£‡∏™‡∏Ç‡∏° ‡πÄ‡∏ä‡πà‡∏ô ‡πÉ‡∏ö‡∏¢‡∏≠ ‡∏°‡∏∞‡∏£‡∏∏‡∏°" },

            // --- 6. ‡πÄ‡∏´‡∏°‡∏±‡∏ô‡∏ï‡∏§‡∏î‡∏π (‡∏ô‡πâ‡∏≥‡∏£‡∏∞‡∏Ñ‡∏ô‡∏•‡∏°) -> ‡∏ò‡∏≤‡∏ï‡∏∏‡∏ô‡πâ‡∏≥ 12-1 ---
            { startM: 12, startP: "Waning", endM: 2, endP: "Waxing", 
              main: "‡∏ò‡∏≤‡∏ï‡∏∏‡∏ô‡πâ‡∏≥ (‡∏≠‡∏≤‡πÇ‡∏õ)", 
              sub: "‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏´‡πà‡∏á‡πÄ‡∏™‡∏°‡∏´‡∏∞‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏ï‡∏∞‡∏™‡∏°‡∏∏‡∏è‡∏ê‡∏≤‡∏ô‡∏£‡∏∞‡∏Ñ‡∏ô‡∏Å‡∏±‡∏ô",
              color: "linear-gradient(135deg, #90CAF9, #2196F3)",
              avatarUrl: "https://img5.pic.in.th/file/secure-sv1/691ab2bc8bd127f21c3a91c0439629ef.jpg", // Water
              desc: "‡∏ú‡∏î‡∏ú‡∏∑‡πà‡∏ô ‡∏™‡∏¥‡∏ß ‡∏•‡∏°‡∏û‡∏¥‡∏© ‡∏Ñ‡∏±‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏û‡πâ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡πâ‡∏≠‡∏á‡∏ú‡∏π‡∏Å‡∏á‡πà‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏¢‡πá‡∏ô",
              avoid: "‡∏Å‡∏≤‡∏£‡∏ô‡∏≠‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏±‡∏Å‡∏î‡∏≠‡∏á",
              trait: "‡∏ú‡∏¥‡∏ß‡∏û‡∏£‡∏£‡∏ì‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏ß‡∏¢ ‡πÅ‡∏ï‡πà‡∏≠‡∏≤‡∏à‡πÅ‡∏û‡πâ‡∏á‡πà‡∏≤‡∏¢",
              food: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏™‡∏Ç‡∏° ‡∏£‡∏™‡∏à‡∏∑‡∏î ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ü‡∏≠‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏î ‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏∞‡πÄ‡∏î‡∏≤ ‡∏ü‡πâ‡∏≤‡∏ó‡∏∞‡∏•‡∏≤‡∏¢‡πÇ‡∏à‡∏£" }
        ];

        // ==========================================
        // 3. Logic Matching
        // ==========================================
        function getCombinedAnalysis(lunarInfo) {
            let tm = lunarInfo.thaiMonth;
            let tp = lunarInfo.phase;
            
            let matches = sadaoData.filter(rule => {
                if (rule.startM < rule.endM) {
                    let isAfterStart = (tm > rule.startM) || (tm === rule.startM && tp === rule.startP);
                    let isBeforeEnd = (tm < rule.endM) || (tm === rule.endM && tp === "Waxing");
                    return isAfterStart && isBeforeEnd;
                } else { // ‡∏Ç‡πâ‡∏≤‡∏°‡∏õ‡∏µ
                    let isAfterStart = (tm === rule.startM && tp === rule.startP) || (tm > rule.startM);
                    let isBeforeEnd = (tm === rule.endM && tp === "Waxing") || (tm < rule.endM);
                    return isAfterStart || isBeforeEnd;
                }
            });

            return matches.length > 0 ? matches[0] : sadaoData[0];
        }

        // ==========================================
        // 4. Main Function
        // ==========================================
        async function startAnalysis() {
            const d = parseInt(document.getElementById('inputDay').value);
            const m = parseInt(document.getElementById('inputMonth').value);
            const yAD = parseInt(document.getElementById('inputYear').value);

            // 1. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
            const lunarInfo = calculateRealLunarDate(d, m, yAD);
            const result = getCombinedAnalysis(lunarInfo);

            // 2. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
            document.getElementById('resMain').innerText = result.main;
            document.getElementById('resSub').innerText = result.sub;
            document.getElementById('lunarInfo').innerText = lunarInfo.display;
            
            document.getElementById('resDesc').innerText = result.desc;
            document.getElementById('resTrait').innerText = result.trait;
            document.getElementById('resAvoid').innerText = result.avoid;
            document.getElementById('resFood').innerText = result.food;

            // 3. ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û & ‡∏ò‡∏µ‡∏°
            document.getElementById('resultHeader').style.background = result.color;
            const avatarImg = document.getElementById('avatarImg');
            avatarImg.src = result.avatarUrl;
            avatarImg.classList.remove('hidden');

            document.getElementById('cardObject').classList.add('is-flipped');
            
            // 4. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            try {
                const birthDateStr = `${yAD}-${String(m).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
                fetch(SCRIPT_URL, {
                    method: 'POST', mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        userId: "Guest", 
                        birthDate: birthDateStr, 
                        element: result.main, 
                        subElement: result.sub + ` (${lunarInfo.display})`
                    })
                });
            } catch(e) {}
        }

        function resetCard() { document.getElementById('cardObject').classList.remove('is-flipped'); }
    </script>
</body>
</html>
